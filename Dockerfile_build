
FROM debian:12.0-slim
RUN apt-get update
RUN apt-get install -y -q tzdata ffmpeg 

WORKDIR /app
COPY build/ /app/
COPY backend/config /app/config
COPY entrypoint.sh /app/entrypoint.sh

# the zip/unzip process doesn't restore +x
RUN chmod +x /app/server/av-server* 

EXPOSE 9000
EXPOSE 2121

ENTRYPOINT [ "/app/entrypoint.sh" ]